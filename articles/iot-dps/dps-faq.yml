### YamlMime:FAQ
metadata:
  title: Microsoft Azure IoT Hub Device Provisioning Service frequently asked questions (FAQ) 
  description: Find answer to common questions about Azure IoT Hub Device Provisioning Service.
  author: kgremban
  ms.author: kgremban
  ms.date: 03/01/2022
  ms.topic: faq
  ms.service: iot-dps
  services: iot-dps
title: Azure IoT Hub Device Provisioning Service frequently asked questions (FAQ)
summary: |
  This article answers to common questions about Azure IoT Hub Device Provisioning Service. The following topics are covered:
  
  * DPS Management
  * DPS Billing

  

sections:
  - name: DPS Management
    questions:
      - question: |
         What is the recommended way to update a linked hub when the primary key for the IoT Hub access policy is regenerated? 
        answer: |
         The primary key is embedded inside the connection string that DPS uses for authentication. Whenever the primary connection string is modified, the primary key will also be modified, and you'll need to relink the hub to your DPS.
      - question: |
         How can I disable or remove a single device within an enrollment group without affecting any other devices? 
        answer: |
         You can create a disabled individual enrollment entry for the device. To learn more, see [How to disenroll a device from Azure IoT Hub Device Provisioning Service](how-to-revoke-device-access-portal.md).
      - question: |
         Can I use a WHERE clause to filter results when querying individual enrollments or enrollment groups? 
        answer: |
         Filtering results with a `WHERE` clause is not supported at this time. You can use `SELECT *` to return paged results for all the individual enrollments or enrollment groups in a DPS instance.
      - question: |
         How does the health of an IoT hub affect device provisioning? 
        answer: |
         Currently DPS doesn't check the health of an IoT hub before assigning devices. DPS will continue to try to assign devices to an IoT hub that is down based on its configured allocation policy. For example, if the configured allocation policy is *Lowest latency* and DPS has a linked IoT hub in region A (hub A) and one in region B (hub B), it will assign a device trying to provision from region A to hub A, even if hub A is down. To factor in IoT hub health when provisioning devices, you can implement a custom allocation policy with your own monitoring logic based on [IoT Hub diagnostics](../iot-hub/monitor-iot-hub.md) or your own user-defined metrics. To learn more about custom allocation policies, see [Understand custom allocation policies](concepts-custom-allocation.md).
      - question: |
         Can multiple DPS instances provision devices to the same IoT hub? 
        answer: |
         Yes; however, built-in allocation policies apply to each DPS instance individually, so load balancing across multiple IoT hubs is not possible when using the built-in DPS policies. Instead, you can use a custom allocation policy to implement load balancing when using multiple DPS instances. To learn more about custom allocation policies, see [Understand custom allocation policies](concepts-custom-allocation.md).
      - question: |
         How can I get an authorization token to use for REST service operations? 
        answer: |
         For information about how to get an authorization token for REST service operations like [Create or Update Enrollment Group](/rest/api/iot-dps/service/enrollment-group/create-or-update) and [Get Device Registration State](/rest/api/iot-dps/service/device-registration-state/get), see [Service API authentication](how-to-control-access.md#service-api-authentication).

  - name: DPS Billing
    questions:
      - question: |
         Which Device Provisioning Service API operations are billable and what are their prices?” 
        answer: |
         For information on which operations are billable and their prices, see [Billable service operations and pricing for Microsoft Device Provisioning Service](about-iot-dps.md#billable-service-operations-and-pricing)

additionalContent: |

  ## Next steps
  
  If this FAQ doesn’t answer your question, you can contact us through the following channels (in escalating order):

  * The comments section of this article.
  * [MSFT Q&A page for Azure DPS](/answers/topics/azure-iot-dps.html?sort=viewCount).
  * Microsoft Support. To create a new support request, in the [Azure portal](https://portal.azure.com/), on the Help tab, select the **Help +** support button, and then select **New support request**.
  

  > [!div class="nextstepaction"]
  > [Troubleshoot DPS](how-to-troubleshoot-dps.md)
